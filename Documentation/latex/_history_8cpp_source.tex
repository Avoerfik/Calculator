\doxysection{History.\+cpp}
\hypertarget{_history_8cpp_source}{}\label{_history_8cpp_source}\index{App/src/History.cpp@{App/src/History.cpp}}
\mbox{\hyperlink{_history_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00001}00001\ \textcolor{preprocessor}{\#include\ "{}../App/include/History.h"{}}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00002}00002\ \textcolor{preprocessor}{\#include\ <iostream>}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00003}00003\ \textcolor{preprocessor}{\#include\ <ctime>}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00004}00004\ \textcolor{preprocessor}{\#include\ <iomanip>}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00005}00005\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00006}00006\ \textcolor{comment}{//\ Новая\ версия\ -\/\ принимает\ только\ информацию,\ номер\ генерируется\ автоматически}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00007}\mbox{\hyperlink{class_history_a9eda9965c45bde02a3c5c3a5aea4b329}{00007}}\ \mbox{\hyperlink{class_data_af11f741cb7f587e2e495452a8905a22a}{Data}}*\ \mbox{\hyperlink{class_history_a9eda9965c45bde02a3c5c3a5aea4b329}{History::reserveData}}(\textcolor{keyword}{const}\ std::vector<std::string>\&\ info)}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00008}00008\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00009}00009\ \ \ \ \ \mbox{\hyperlink{struct_record}{Record}}\ record;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00010}00010\ \ \ \ \ record.\mbox{\hyperlink{struct_record_a4bcc718199b5e32ec57b07f82e8f6313}{info}}\ =\ info;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00011}00011\ \ \ \ \ record.\mbox{\hyperlink{struct_record_a5c8f84cd63104e6ae4cd4cd2938365bc}{number}}\ =\ \mbox{\hyperlink{class_data_ac00c9aa58b57fa56b3488be1951ab523}{getNextNumber}}();\ \ \textcolor{comment}{//\ Автоматически\ получаем\ следующий\ номер}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00012}00012\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00013}00013\ \ \ \ \ this-\/>\mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}}.push\_back(record);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00014}00014\ \ \ \ \ std::chrono::system\_clock::time\_point\ now\ =\ std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00015}00015\ \ \ \ \ \mbox{\hyperlink{struct_record_history}{RecordHistory}}\ newrh\ =\ \{\ record,\ now\ \};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00016}00016\ \ \ \ \ rh.push\_back(newrh);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00017}00017\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00018}00018\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00019}00019\ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00020}00020\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00021}00021\ \textcolor{comment}{//\ Старая\ версия\ для\ совместимости}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00022}\mbox{\hyperlink{class_history_aab8cb550ba5a172b530b4d2c1650cf29}{00022}}\ \mbox{\hyperlink{class_data_af11f741cb7f587e2e495452a8905a22a}{Data}}*\ \mbox{\hyperlink{class_history_a9eda9965c45bde02a3c5c3a5aea4b329}{History::reserveData}}(\mbox{\hyperlink{struct_record}{Record}}\ \mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}})}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00023}00023\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00024}00024\ \ \ \ \ \textcolor{comment}{//\ Если\ номер\ не\ установлен,\ устанавливаем\ автоматически}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00025}00025\ \ \ \ \ \textcolor{keywordflow}{if}\ (\mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}}.number\ ==\ 0)\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00026}00026\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}}.number\ =\ \mbox{\hyperlink{class_data_ac00c9aa58b57fa56b3488be1951ab523}{getNextNumber}}();}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00027}00027\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00028}00028\ \ \ \ \ \textcolor{keywordflow}{else}\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00029}00029\ \ \ \ \ \ \ \ \ \textcolor{comment}{//\ Обновляем\ счетчик,\ если\ номер\ предоставлен\ вручную}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00030}00030\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_data_ae03850de2a00d7c9cfa385406d5be3d4}{currentNumber}}\ =\ std::max(\mbox{\hyperlink{class_data_ae03850de2a00d7c9cfa385406d5be3d4}{currentNumber}},\ \mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}}.number\ +\ 1);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00031}00031\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00032}00032\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00033}00033\ \ \ \ \ this-\/>data.push\_back(\mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}});}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00034}00034\ \ \ \ \ std::chrono::system\_clock::time\_point\ now\ =\ std::chrono::system\_clock::now();}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00035}00035\ \ \ \ \ \mbox{\hyperlink{struct_record_history}{RecordHistory}}\ newrh\ =\ \{\ \mbox{\hyperlink{class_data_af52531568b81e4705f2f6e40a62dd5e1}{data}},\ now\ \};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00036}00036\ \ \ \ \ rh.push\_back(newrh);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00037}00037\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00038}00038\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00039}00039\ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00040}00040\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00041}\mbox{\hyperlink{class_history_a21139e549b8d94f2eeabc75f3fc1601e}{00041}}\ \mbox{\hyperlink{class_data_af11f741cb7f587e2e495452a8905a22a}{Data}}*\ \mbox{\hyperlink{class_history_a21139e549b8d94f2eeabc75f3fc1601e}{History::getData}}()}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00042}00042\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00043}00043\ \ \ \ \ \textcolor{keywordflow}{return}\ \textcolor{keyword}{this};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00044}00044\ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00045}00045\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00046}00046\ \textcolor{comment}{//\ Метод\ для\ вывода\ одной\ записи\ истории}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00047}\mbox{\hyperlink{class_history_a9baf386eff2e21f1f389d003043499fc}{00047}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_history_a9baf386eff2e21f1f389d003043499fc}{History::printRecordHistory}}(\textcolor{keyword}{const}\ \mbox{\hyperlink{struct_record_history}{RecordHistory}}\&\ rh)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00048}00048\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00049}00049\ \ \ \ \ std::time\_t\ time\ =\ std::chrono::system\_clock::to\_time\_t(rh.now);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00050}00050\ \ \ \ \ std::tm\ localTime;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00051}00051\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00052}00052\ \textcolor{preprocessor}{\#ifdef\ \_WIN32}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00053}00053\ \ \ \ \ localtime\_s(\&localTime,\ \&time);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00054}00054\ \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00055}00055\ \ \ \ \ localtime\_r(\&time,\ \&localTime);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00056}00056\ \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00057}00057\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00058}00058\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Record\ \#"{}}\ <<\ rh.record.number\ <<\ \textcolor{stringliteral}{"{}:\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00059}00059\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ info\ :\ rh.record.info)\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00060}00060\ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}\ \ "{}}\ <<\ info\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00061}00061\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00062}00062\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}\ \ Calculated\ at:\ "{}}\ <<\ std::put\_time(\&localTime,\ \textcolor{stringliteral}{"{}\%Y-\/\%m-\/\%d\ \%H:\%M:\%S"{}})\ <<\ \textcolor{stringliteral}{"{}\(\backslash\)n"{}};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00063}00063\ \ \ \ \ std::cout\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00064}00064\ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00065}00065\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00066}00066\ \textcolor{comment}{//\ Метод\ для\ вывода\ всей\ истории}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00067}\mbox{\hyperlink{class_history_adcaee81d1392f1c8278138a3894f0051}{00067}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_history_adcaee81d1392f1c8278138a3894f0051}{History::printAllHistory}}()\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00068}00068\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00069}00069\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}===\ Full\ History\ ("{}}\ <<\ rh.size()\ <<\ \textcolor{stringliteral}{"{}\ records)\ ==="{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00070}00070\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ historyEntry\ :\ rh)\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00071}00071\ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_history_a9baf386eff2e21f1f389d003043499fc}{printRecordHistory}}(historyEntry);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00072}00072\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00073}00073\ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00074}00074\ }
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00075}00075\ \textcolor{comment}{//\ Метод\ для\ вывода\ записи\ по\ номеру}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00076}\mbox{\hyperlink{class_history_aa68245eca9285d748dee39ef73805872}{00076}}\ \textcolor{keywordtype}{void}\ \mbox{\hyperlink{class_history_aa68245eca9285d748dee39ef73805872}{History::printRecordByNumber}}(\textcolor{keywordtype}{unsigned}\ \textcolor{keywordtype}{int}\ number)\textcolor{keyword}{\ const}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00077}00077\ \textcolor{keyword}{}\{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00078}00078\ \ \ \ \ \textcolor{keywordflow}{for}\ (\textcolor{keyword}{const}\ \textcolor{keyword}{auto}\&\ historyEntry\ :\ rh)\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00079}00079\ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{if}\ (historyEntry.record.number\ ==\ number)\ \{}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00080}00080\ \ \ \ \ \ \ \ \ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}===\ Record\ \#"{}}\ <<\ number\ <<\ \textcolor{stringliteral}{"{}\ ==="{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00081}00081\ \ \ \ \ \ \ \ \ \ \ \ \ \mbox{\hyperlink{class_history_a9baf386eff2e21f1f389d003043499fc}{printRecordHistory}}(historyEntry);}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00082}00082\ \ \ \ \ \ \ \ \ \ \ \ \ \textcolor{keywordflow}{return};}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00083}00083\ \ \ \ \ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00084}00084\ \ \ \ \ \}}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00085}00085\ \ \ \ \ std::cout\ <<\ \textcolor{stringliteral}{"{}Record\ \#"{}}\ <<\ number\ <<\ \textcolor{stringliteral}{"{}\ not\ found!"{}}\ <<\ std::endl;}
\DoxyCodeLine{\Hypertarget{_history_8cpp_source_l00086}00086\ \}}

\end{DoxyCode}
